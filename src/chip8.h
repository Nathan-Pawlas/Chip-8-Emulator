#pragma once
#include <fstream>
#include <iterator>
#include <vector>
#include <iostream>

#define RESOLUTION_WIDTH 64
#define RESOLUTION_HEIGHT 32

class chip8
{
public:
	chip8();
	~chip8();

	void initialize();

	void emulate();

	void load_game(const char* file_path);

	void disp_clear();
public:
	unsigned short opcode;
	unsigned char memory[4096];
	unsigned char reg[16];
	unsigned short index;
	unsigned short pc;
	unsigned short stack[16];
	unsigned short stack_pointer;
	unsigned char delay_timer;
	unsigned char sound_timer;
	unsigned char key_inputs[16];
	unsigned char gfx[64 * 32];
	bool draw = false;


	//Fonts are 4x5 pixels
	unsigned char fonts[80] = {
	0xF0, 0x90, 0x90, 0x90, 0xF0,
	0x20, 0x60, 0x20, 0x20, 0x70,
	0xF0, 0x10, 0xF0, 0x80, 0xF0,
	0xF0, 0x10, 0xF0, 0x10, 0xF0,
	0x90, 0x90, 0xF0, 0x10, 0x10,
	0xF0, 0x80, 0xF0, 0x10, 0xF0,
	0xF0, 0x80, 0xF0, 0x90, 0xF0,
	0xF0, 0x10, 0x20, 0x40, 0x40,
	0xF0, 0x90, 0xF0, 0x90, 0xF0,
	0xF0, 0x90, 0xF0, 0x10, 0xF0,
	0xF0, 0x90, 0xF0, 0x90, 0x90,
	0xE0, 0x90, 0xE0, 0x90, 0xE0,
	0xF0, 0x80, 0x80, 0x80, 0xF0,
	0xE0, 0x90, 0x90, 0x90, 0xE0,
	0xF0, 0x80, 0xF0, 0x80, 0xF0,
	0xF0, 0x80, 0xF0, 0x80, 0x80
	};
	
};

/*
Memory Map
0x0000 - 0x01FF - Chip-8 Interpreter
0x0050 - 0x00A0 - Built in 4x5 pixel font set (0-F)
0x0F00 - 0x0FFF - Program ROM, Stack, Variables
*/

/*
Fonts

0:					1:					2:					3:
##########			##########			##########			##########
#01100000# 0x60		#11110000# 0xF0		#11110000# 0xF0		#11110000# 0xF0
#11010000# 0xB0		#00110000# 0x30		#10010000# 0x90		#00010000# 0x10
#11010000# 0xB0		#00110000# 0x30		#00100000# 0x20		#01110000# 0x70
#11010000# 0xB0		#00110000# 0x30		#01000000# 0x40		#00010000# 0x10
#01100000# 0x60		#01111000# 0x78		#11110000# 0xF0		#11110000# 0xF0
##########			##########			##########			##########

4:					5:					6:					7:
##########			##########			##########			##########
#10010000# 0x90		#11110000# 0xF0		#11110000# 0xF0		#11110000# 0xF0
#10010000# 0x90		#10000000# 0x80		#10000000# 0x80		#10010000# 0x90
#11110000# 0xF0		#11110000# 0xF0		#11110000# 0xF0		#00111000# 0x38
#00010000# 0x10		#00010000# 0x10		#10010000# 0x90		#00010000# 0x10
#00010000# 0x10		#11110000# 0xF0		#11110000# 0xF0		#00010000# 0x10
##########			##########			##########			##########

8:					9:					A:					B:
##########			##########			##########			##########
#11110000# 0xF0		#11110000# 0xF0		#01100000# 0x60		#11100000# 0xE0
#10010000# 0x90		#10010000# 0x90		#10010000# 0x90		#10010000# 0x90
#11110000# 0xF0		#11110000# 0xF0		#11110000# 0xF0		#11100000# 0xE0
#10010000# 0x90		#00010000# 0x10		#10010000# 0x90		#10010000# 0x90
#11110000# 0xF0		#00010000# 0x10		#10010000# 0x90		#11100000# 0xE0
##########			##########			##########			##########

C:					D:					E:					F:
##########			##########			##########			##########
#11110000# 0xF0		#11100000# 0xE0		#11110000# 0xF0		#11110000# 0xF0
#10000000# 0x80		#10010000# 0x90		#10000000# 0x80		#10000000# 0x80
#10000000# 0x80		#10010000# 0x90		#11110000# 0xF0		#11110000# 0xF0
#10000000# 0x80		#10010000# 0x90		#10000000# 0x80		#10000000# 0x80
#11110000# 0xF0		#11100000# 0xE0		#11110000# 0xF0		#10000000# 0x80
##########			##########			##########			##########
*/